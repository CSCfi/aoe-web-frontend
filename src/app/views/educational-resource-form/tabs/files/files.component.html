<alert type="info" dismissible="true">
  Tervetuloa lisäämään materiaalia palveluun. Anna halutessasi materiaalille myös englannin- ja ruotsinkielinen nimi. Mikäli sinulla on samasta materiaalista eri kieliversioita niin voit lisätä ne erikseen palveluun. Samassa materiaalissa voi olla useita tiedostoja, jotka voit lisätä materiaaliin tässä näkymässä 'Lisää tiedosto' -painikkeella.
</alert>

<form [formGroup]="fileUploadForm" (ngSubmit)="onSubmit()">
  <div class="form-group">
    <div class="form-row align-items-end">
      <div class="col" formGroupName="name">
        <label for="name-fi">{{ 'forms.educationalResource.basicDetails.materialName' | translate }}*</label>

        <input
          type="text"
          class="form-control"
          id="name-fi"
          placeholder="Oppimateriaalin nimi"
          formControlName="fi"
          required
        >
      </div>

      <div class="col-auto">
        <button type="button" class="btn btn-gray" (click)="openModal(nameI18n)">Kieliversiot</button>
      </div>

      <ng-template #nameI18n>
        <div class="modal-header">
          <h5 class="modal-title">Kieliversiot: Oppimateriaalin nimi</h5>

          <button type="button" class="close" aria-label="Sulje" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body">
          <h4>Kieliversioiden lisääminen</h4>

          <div class="form-group">
            <label for="lang">Valitse kieli</label>

            <select
              class="form-control"
              id="lang"
              (change)="selectedLang = selectLang.value"
              #selectLang
            >
              <option value="en">englanti</option>
              <option value="sv">ruotsi</option>
            </select>
          </div>

          <ng-container *ngIf="selectedLang === 'en'">
            <div class="form-group" formGroupName="name">
              <label for="name-en">{{ 'forms.educationalResource.basicDetails.materialName' | translate }}*</label>

              <input
                type="text"
                class="form-control"
                id="name-en"
                placeholder="Oppimateriaalin nimi"
                formControlName="en"
              >
            </div>
          </ng-container>

          <ng-container *ngIf="selectedLang === 'sv'">
            <div class="form-group" formGroupName="name">
              <label for="name-sv">{{ 'forms.educationalResource.basicDetails.materialName' | translate }}*</label>

              <input
                type="text"
                class="form-control"
                id="name-sv"
                placeholder="Oppimateriaalin nimi"
                formControlName="sv"
              >
            </div>
          </ng-container>
        </div>
      </ng-template>
    </div>
  </div>

  <ng-container *ngFor="let file of files.controls; let i = index;">
    <div class="form-group" formArrayName="files">
      <ng-container [formGroupName]="i">
        <h4>{{ i + 1 }}. tiedosto</h4>

        <div class="form-row align-items-end mb-2">
          <div class="col">
            <label for="file">{{ 'forms.educationalResource.basicDetails.file' | translate }}*</label>

            <div class="custom-file">
              <input
                type="file"
                class="custom-file-input"
                id="file"
                formControlName="file"
                required
              >
              <span class="custom-file-label">{{ files.controls[i].controls.file.value || 'Valitse tiedosto' }}</span>
            </div>
          </div>

          <div class="col-auto">tai</div>

          <div class="col">
            <label for="link">{{ 'forms.educationalResource.basicDetails.link' | translate }}*</label>

            <input
              type="text"
              class="form-control"
              id="link"
              placeholder="https://"
              formControlName="link"
            >
          </div>

          <div class="col-auto">
            <label for="language">{{ 'forms.educationalResource.basicDetails.language' | translate }}*</label>

            <select
              class="form-control"
              id="language"
              formControlName="language"
            >
              <option value="fi">suomi</option>
              <option value="sv">ruotsi</option>
              <option value="en">englanti</option>
            </select>
          </div>
        </div>

        <div class="form-row align-items-end">
          <div class="col">
            <label for="displayName">{{ 'forms.educationalResource.basicDetails.displayName' | translate }}*</label>

            <input
              type="text"
              class="form-control"
              id="displayName"
              placeholder="Ei valittua tiedostoa"
              formControlName="displayName"
              required
            >
          </div>

          <div class="col-auto">
            <button type="button" class="btn btn-gray">Kieliversiot</button>
          </div>
        </div>
      </ng-container>
    </div>
  </ng-container>

  <div class="form-group">
    <button type="button" class="btn btn-gray" (click)="addFile()">Lisää tiedosto</button>
  </div>

  <div class="d-flex justify-content-between">
    <button
      type="button"
      class="btn btn-secondary"
      disabled
    >Edellinen</button>

    <button
      type="reset"
      class="btn btn-light"
      [disabled]="fileUploadForm.pristine"
    >{{ 'forms.common.abort' | translate }}</button>

    <button
      type="submit"
      class="btn btn-blue"
      [disabled]="fileUploadForm.invalid"
    >{{ 'forms.common.next' | translate }}</button>
  </div>
</form>
